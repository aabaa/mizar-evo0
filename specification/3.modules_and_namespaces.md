# 3. Modules and Namespaces

## 3.1 Module Structure and Namespace Rules

In the redesigned Mizar system, modules play a role in organizing and structuring mathematical knowledge. A module represents a cohesive unit of mathematical content, typically focusing on a specific concept, theory, or related group of definitions and theorems.

### Definition and Purpose

A module is a self-contained unit of formalized mathematics that:
    - Encapsulates related mathematical concepts, definitions, and theorems
    - Provides a mechanism for organizing and structuring large mathematical formalizations
    - Facilitates code reuse and maintenance
    - Enables collaborative development of mathematical libraries

### Correspondence with Directories and Files

There is a direct one-to-one correspondence between modules and `.miz` files:
    1. Each `.miz` file represents exactly one module.
    2. The module name typically matches the file name (without the .miz extension).
    3. The file's location in the directory structure determines its namespace.
    4. For example, a file located at `/mml/algebra/group.miz` defines the `group` module in the `mml.algebra` namespace.

### Namespace Derivation and Hierarchy

1. **Root Namespace**: The root directory of the Mizar library corresponds to the global namespace.
2. **Subdirectories**: Each subdirectory adds a level to the namespace hierarchy.
3. **Dot Notation**: Namespaces use dot notation to represent hierarchy levels (e.g., `mml.algebra.group`).

### Repository Structure and Namespaces

The Mizar system is organized into three main repositories, each with its own namespace:

1. **Mizar Mathematical Library (MML)**: `/mml`
   - This is the main repository for formalized mathematics.
   - Namespaces in MML follow the directory structure, e.g., `/mml/algebra/group/group.miz` corresponds to the `mml.algebra.group` namespace and the `group` module.

2. **Formalized Mathematics (FM)**: `/fm`
   - This repository is used for publishing articles in the journal "Formalized Mathematics".
   - Articles are organized by year, e.g., `/fm/y2024/ndiff12.miz` corresponds to the `fm.y2024` namespace and the `ndiff12` module.

3. **User Repository**: `/user`
   - This space is allocated for individual users to develop and store their own formalizations.
   - User namespaces are prefixed with their GitHub username, e.g., `/user/@aabaa/myproject/abc.miz` corresponds to the `user.@aabaa.myproject` namespace and the `abc` module.

### Naming Conventions

1. **Valid Characters**: Module and namespace names should consist of lowercase letters, numbers, and underscores.
2. **Descriptive Names**: Use clear, descriptive names that reflect the mathematical concepts contained within.
3. **Avoiding Conflicts**: Ensure that module and namespace names do not conflict with reserved keywords or built-in Mizar constructs.

## 3.2 Import Statements

Import statements in Mizar allow modules to use definitions, theorems, and other elements from other modules.

### Basic Import Syntax

The basic syntax for importing in Mizar is as follows:

```mizar
import <module_path>;
```

Where `<module_path>` is the dot-separated path to the module. This imports the specified module, making all its public elements available in the current module.

Example:

We assume `mode Group` is defined in `/mml/algebra/group.miz`.

```mizar
import mml.algebra.group;
```

Now all the following statements are valid in the same module:

```mizar
definition
   let G be Group;
   let H be group.Group;              :: `Group` is located in `group` module
   let I be algebra.group.Group;      :: More detailed path
   let J be mml.algebra.group.Group;  :: The full path of the `Group`
   ...
end
```

### Importing with Aliases

To avoid potential naming conflicts or to provide shorter names for frequently used modules, you can use aliases:

```mizar
import <module_path> as <alias>;
```

Example:

```mizar
import mml.algebra.group as grp;
```

Now you can use the alias instead of the original module name:

```mizar
let G be grp.Group;
```

### Importing from Multiple Paths

Mizar allows you to import multiple modules in a single import statement:

```mizar
import mml.algebra.{group, ring, field};
```

This imports the `group`, `ring`, and `field` modules from the `mml.algebra` namespace.

### Relative Imports

For imports within the same repository, you can use relative paths:

```mizar
import ..<module_path>; :: Relative path from the parent directory
import .<module_path>;  :: Relative path from the current directory
```

Example:

```mizar
:: In file: /mml/algebra/group_theory/subgroup.miz
import ..group; :: `group` module is located: /mml/algebra/group.miz
```

### Import Behavior

- Imports are non-recursive. Only the directly imported module's public elements are made available.
- Aliases provide local shortcuts but do not affect the original module names.
- The original module path remains valid even when an alias is used.

### Resolving Name Conflicts

When importing modules that export elements with conflicting names, you can use aliases or fully qualified names to disambiguate:

```mizar
import mml.algebra.group as alg_group;
import mml.topology.group as top_group;

theorem
  for G being alg_group.Group
  for T being top_group.Group
  holds ...
end
```

You can also use the original paths to avoid conflicts:

```mizar
theorem
  for G being mml.algebra.group.Group
  for T being mml.topology.group.Group
  holds ...
end
```

### Best Practices

1. Use meaningful alias names when importing modules with potentially conflicting names.
2. Group related imports together for better readability.
3. Use explicit module prefixes or aliases in cases where clarity is needed, even if there's no direct conflict.
4. Avoid circular dependencies between modules.
5. When working with modules that export similarly named elements, consider using aliases consistently throughout your project.
6. Prefer using original module paths in larger projects to maintain clarity and avoid confusion.

### Example

Here's a comprehensive example demonstrating various import techniques:

```mizar
:: File: /mml/advanced_math/complex_structures.miz

import mml.algebra.group as alg_grp;
import mml.algebra.ring;
import mml.algebra.field;
import ..topology.topological_group as top_grp;
import mml.category_theory.{category, functor};

theorem advanced_structure_theorem:
  for G being alg_grp.Group
  for R being mml.algebra.ring.Ring
  for F being Field
  for T being top_grp.Group
  for C being category.Category
  holds ...
end

theorem using_original_paths:
  for G being mml.algebra.group.Group
  for T being mml.advanced_math.topology.topological_group.Group
  holds ...
end
```

## 3.3 Export Statements

## 3.4 Privacy and Visibility

## 3.5 Best Practices and Common Pitfalls
