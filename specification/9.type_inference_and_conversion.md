# 9. Type Inference and Conversion

- [9. Type Inference and Conversion](#9-type-inference-and-conversion)
    - [9.1. Basic Type Inference](#91-basic-type-inference)
    - [9.2. Type Conversion](#92-type-conversion)
        - [9.2.1. Implicit Conversion](#921-implicit-conversion)
        - [9.2.2. Explicit Conversion](#922-explicit-conversion)
    - [9.3. Type Checking Process](#93-type-checking-process)

## 9.1. Basic Type Inference

Mizar Evolution supports automatic type inference based on inheritance hierarchies, attribute clusters, and structural compatibility. For example:

```mizar
let G be Group;
reconsider M = G as Magma;  :: Group is inferred to be a Magma
```

This inference is driven by the structural definitions and clustering rules defined in the library. Variable declarations, `reconsider` statements, and mode applications all benefit from type inference.

## 9.2. Type Conversion

Mizar Evolution supports two main forms of type conversion:

### 9.2.1. Implicit Conversion

Implicit conversions are performed automatically by the verifier. They include:

* **Upcasting** via inheritance (e.g., from `Group` to `Magma`)
* **Clustering-based inference** using declared attribute implications
* **Structural compatibility** from mode and structure definitions

These conversions enable flexible typing while preserving logical soundness.

### 9.2.2. Explicit Conversion

Explicit conversions are used when type inference is insufficient or ambiguity exists. Two mechanisms are provided:

* `qua` operator: resolves type explicitly for disambiguation

  ```mizar
  (R qua AddLoopStr) is associative;
  ```

* `reconsider` statement: changes or refines the type of an expression with optional proof obligations

  ```mizar
  reconsider f as Function of X,Y;
  ```

Explicit conversions may trigger proof obligations to justify type compatibility.

## 9.3. Type Checking Process

The type checking phase consists of:

1. **Syntactic validation** of type declarations and usage
2. **Generation of proof obligations** for type assumptions and conversions
3. **Resolution of inheritance and clusters** to infer compatible types
4. **Application of type conversions** (implicit or explicit)

Type checking ensures all expressions are well-typed and semantically coherent within the Mizar Evolution system.&#x20;
